<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Client.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Client.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Browser from './Browser';
import Room from './Room';
import User from './User';
import InvalidArgumentError from './Exceptions/InvalidArgumentError';
import ChatExchangeError from './Exceptions/ChatExchangeError';

const validHosts = ['stackexchange.com', 'meta.stackexchange.com', 'stackoverflow.com'];

/**
 * Represents the main chatexchange Client class.
 * @class
 */
class Client {

    /**
     * Creates an instance of Client.
     * 
     * @param {string} host The host to connect to (stackexchange.com, meta.stackexchange.com, or stackoverflow.com)
     * @throws {InvalidArgumentError} If the host is invalid
     * @constructor
     */
    constructor(host) {
        if (typeof host === 'undefined' || host === '') {
            throw new InvalidArgumentError('Host is required.');
        }

        if (!validHosts.includes(host)) {
            throw new InvalidArgumentError(`Invalid host. Must be one of: ${validHosts.join(', ')}`);
        }

        this.host = host;
        this._browser = new Browser(this.host);

    }

    /**
     * Fetches the current logged-in user's profile
     *
     * @returns {Promise&lt;User>} The user object
     * @throws {ChatExchangeError} If no user is currently logged in
     * @memberof Client
     */
    async getMe() {
        if (!this._browser.loggedIn) {
            throw new ChatExchangeError('Cannot get user, not logged in.');
        }

        return new User(this, await this._browser.userId);
    }

    /**
     * Attempts to login to the stackexchange network
     * with the provided username and password
     *
     * @param {string} email Email
     * @param {string} password Password
     * @returns {Promise&lt;string>} Request Cookie Jar (Optionally to save to `loginCookie`)
     * @memberof Client
     */
    async login(email, password) {
        if (typeof email === 'undefined' || email === '') {
            throw new InvalidArgumentError('Email is required.');
        }

        if (typeof password === 'undefined' || password === '') {
            throw new InvalidArgumentError('Password is required');
        }

        const result = await this._browser.login(email, password);

        return result;
    }

    /**
     * Attempts to login to stack exchange, using the provided
     * cookie jar string, which was retrieved from the `login`
     * method.
     *
     * @param {string} cookieString A cookie jar string
     * @returns {Promise&lt;void>} A promise representing when login is complete
     * @memberof Client
     */
    async loginCookie(cookieString) {
        if (typeof cookieString !== 'string' || cookieString === '') {
            throw new InvalidArgumentError('cookieString is required.');
        }

        await this._browser.loginCookie(cookieString);
    }

    /**
     * Joins a room, and returns the room object
     *
     * @param {number} id The ID of the room to join
     * @returns {Promise&lt;Room>} The room object
     * @memberof Client
     */
    async joinRoom(id) {
        const room = new Room(this, id);

        await room.join();

        return room;
    }
}

export default Client;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Browser.html">Browser</a></li><li><a href="Client.html">Client</a></li><li><a href="Message.html">Message</a></li><li><a href="Room.html">Room</a></li><li><a href="User.html">User</a></li></ul><h3>Global</h3><ul><li><a href="global.html#arrayToKvp">arrayToKvp</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Oct 28 2018 19:24:14 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
